(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[883],{9406:function(e,t,s){Promise.resolve().then(s.bind(s,6091))},6091:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var a=s(7437),r=s(2265),n=s(9376),l=s(7648),o=s(2520),i=s.n(o);s(4982);var c=s(8239),d=s(2660),h=s(1403),u=s(3774),m=s(6595),x=s(2381),f=s(279),p=s(930),b=s(427);let j=e=>{let t=Math.round(e/12);return t>=1e5?"₹".concat((t/1e5).toFixed(1),"L"):t>=1e3?"₹".concat((t/1e3).toFixed(0),"K"):"₹".concat(t.toLocaleString())};function g(){let e=(0,n.useRouter)(),t=(0,r.useRef)(null),s=(0,r.useRef)(null),[o,g]=(0,r.useState)(null),[v,y]=(0,r.useState)(""),[N,k]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{if(t.current&&v){i().accessToken=v;try{s.current=new(i()).Map({container:t.current,style:"mapbox://styles/mapbox/light-v11",center:[77.209,28.5494],zoom:11}),s.current.addControl(new(i()).NavigationControl,"top-right"),b.X_.forEach(e=>{let t=document.createElement("div");t.className="school-marker",t.innerHTML='\n          <div class="w-10 h-10 bg-primary rounded-full flex items-center justify-center shadow-lg cursor-pointer transform hover:scale-110 transition-transform">\n            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5z"></path>\n              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"></path>\n            </svg>\n          </div>\n        ',t.addEventListener("click",()=>{var t;g(e),null===(t=s.current)||void 0===t||t.flyTo({center:[e.lng,e.lat],zoom:14})}),new(i()).Marker(t).setLngLat([e.lng,e.lat]).addTo(s.current)}),k(!1)}catch(e){console.error("Map initialization failed:",e),k(!0)}return()=>{var e;null===(e=s.current)||void 0===e||e.remove()}}},[v]),(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)(c.E.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"fixed top-0 left-0 right-0 z-50 bg-card/95 backdrop-blur-md border-b border-border safe-top",children:(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 h-14",children:[(0,a.jsx)(x.z,{variant:"ghost",size:"icon",onClick:()=>e.back(),children:(0,a.jsx)(d.Z,{className:"w-5 h-5"})}),(0,a.jsx)("h1",{className:"font-semibold text-foreground",children:"Schools Near You"}),(0,a.jsx)(x.z,{variant:"ghost",size:"icon",asChild:!0,children:(0,a.jsx)(l.default,{href:"/schools",children:(0,a.jsx)(h.Z,{className:"w-5 h-5"})})})]})}),(0,a.jsx)("div",{className:"pt-14 pb-20 h-screen",children:N?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-primary-light rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(u.Z,{className:"w-8 h-8 text-primary"})}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Map View"}),(0,a.jsxs)("p",{className:"text-muted-foreground text-sm mb-6 max-w-xs",children:["Enter your Mapbox public token to view schools on the map. Get one free at"," ",(0,a.jsx)("a",{href:"https://mapbox.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:"mapbox.com"})]}),(0,a.jsxs)("div",{className:"w-full max-w-sm space-y-3",children:[(0,a.jsx)(f.I,{type:"text",value:v,onChange:e=>y(e.target.value),placeholder:"pk.eyJ1IjoieW91ci10b2tlbiI..."}),(0,a.jsx)(x.z,{onClick:()=>{v.trim()},className:"w-full",disabled:!v.trim(),children:"Load Map"})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-4",children:["Or continue browsing schools in"," ",(0,a.jsx)(l.default,{href:"/schools",className:"text-primary underline",children:"list view"})]})]}):(0,a.jsx)("div",{ref:t,className:"w-full h-full"})}),o&&!N&&(0,a.jsx)(c.E.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:"fixed bottom-24 left-4 right-4 z-40",children:(0,a.jsx)(l.default,{href:"/school/".concat(o.slug),className:"block w-full bg-card rounded-xl shadow-card-hover p-4 text-left",children:(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("img",{src:o.images[0],alt:o.name,className:"w-20 h-20 rounded-lg object-cover shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-foreground truncate",children:o.name}),(0,a.jsxs)("div",{className:"flex items-center gap-1 bg-success text-success-foreground px-2 py-0.5 rounded text-xs font-semibold shrink-0",children:[(0,a.jsx)(m.Z,{className:"w-3 h-3 fill-current"}),o.rating]})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:o.address}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsxs)("span",{className:"text-primary font-semibold text-sm",children:[j(o.annualFee),"/month*"]}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[o.distance," km away"]})]})]})]})})}),(0,a.jsx)(p.Z,{}),(0,a.jsx)("style",{children:"\n        .school-marker {\n          cursor: pointer;\n        }\n        .mapboxgl-popup-content {\n          padding: 0;\n          border-radius: 12px;\n          overflow: hidden;\n        }\n      "})]})}},2660:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1403:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]])},6595:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},930:function(e,t,s){"use strict";var a=s(7437),r=s(4938),n=s(3247),l=s(3774),o=s(8997),i=s(2369),c=s(7648),d=s(9376),h=s(3448);let u=[{icon:r.Z,label:"Home",path:"/"},{icon:n.Z,label:"Search",path:"/schools"},{icon:l.Z,label:"Map",path:"/map"},{icon:o.Z,label:"Saved",path:"/saved"},{icon:i.Z,label:"Profile",path:"/profile"}];t.Z=()=>{let e=(0,d.usePathname)();return(0,a.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border shadow-bottom-nav z-50 safe-bottom",children:(0,a.jsx)("div",{className:"flex items-center justify-around h-16 max-w-lg mx-auto px-2",children:u.map(t=>{let s=e===t.path;return(0,a.jsxs)(c.default,{href:t.path,className:(0,h.cn)("flex flex-col items-center justify-center gap-1 px-3 py-2 rounded-lg transition-all duration-200 min-w-[60px]",s?"text-primary":"text-muted-foreground hover:text-foreground"),children:[(0,a.jsx)(t.icon,{className:(0,h.cn)("w-5 h-5 transition-transform duration-200",s&&"scale-110"),strokeWidth:s?2.5:2}),(0,a.jsx)("span",{className:(0,h.cn)("text-[10px] font-medium",s&&"font-semibold"),children:t.label})]},t.path)})})})}},4982:function(){}},function(e){e.O(0,[508,415,567,228,755,971,117,744],function(){return e(e.s=9406)}),_N_E=e.O()}]);